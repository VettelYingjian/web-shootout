<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<title>Web-shootout Benchmark Suite</title>
<script type="text/javascript" src="js/base.js"></script>
<link type="text/css" rel="stylesheet" href="style.css" />
<script type="text/javascript">
var success = true;

function ShowProgress(text) {
  var status = document.getElementById("status");
  status.innerHTML = text;
}


function AddResult(text) {
  var results = document.getElementById("results");
  results.innerHTML += (text + "<br>");
}


function AddError(name, error) {
  AddResult(name, '<b>error<\/b>');
  success = false;
}


function AddScore(score) {
  var status = document.getElementById("status");
  if (success) {
    status.innerHTML = "Score: " + score;
  }
}


function ShowWarningIfObsolete() {
  // If anything goes wrong we will just catch the exception and no 
  // warning is shown, i.e., no harm is done.
  try {
    var xmlhttp;
    var next_version = parseInt(BenchmarkSuite.version) + 1; 
    var next_version_url = "../v" + next_version + "/run.html";  
    if (window.XMLHttpRequest) {
      xmlhttp = new window.XMLHttpRequest();
    } else if (window.ActiveXObject) {
      xmlhttp = new window.ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open('GET', next_version_url, true);
    xmlhttp.onreadystatechange = function() {
      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        document.getElementById('obsolete').style.display="block";
      }
    };
    xmlhttp.send(null);
  } catch(e) {
    // Ignore exception if check for next version fails. 
    // Hence no warning is displayed.
  }
}

function Load() {
  var version = BenchmarkSuite.version;
  document.getElementById("version").innerHTML = version;
  ShowWarningIfObsolete();  
}

var worker = new Worker('js/worker.js');
worker.addEventListener('message', function(e) {
  console.log('Worker said: ', e.data);
  var msgtype = e.data.type;
  var msg = e.data.msg;
  switch (msgtype) {
    case "status":
      ShowProgress(msg);
      break;
    case "result":
      AddResult(msg);
      break;
    case "error":
      AddError(msg);
      break;
    case "score":
      AddScore(msg);
      break;
    default:
      alert("couldn't determine type of worker message");
  }
}, false);

worker.postMessage({'type':'start', 'msg':''}); // Start the worker.


</script>
</head>
<body onload="Load()">
<div>
  <div class="title"><h1>Web-shootout Benchmark Suite - version <span id="version">?</span></h1></div>
  <div class="warning" id="obsolete"> 
Warning! This is not the latest version of the V8 benchmark
suite. Consider running the   
<a href="http://v8.googlecode.com/svn/data/benchmarks/current/run.html">
latest version</a>.  
  </div>
  <table>
    <tr>
      <td class="contents">
This page contains a suite of pure JavaScript benchmarks that we have
used to tune V8. The final score is computed as the geometric mean of
the individual results to make it independent of the running times of
the individual benchmarks and of a reference system (score
100). Scores are not comparable across benchmark suite versions and
higher scores means better performance: <em>Bigger is better!</em>

<ul>
<li><b>Fannkuchredux</b><br>Pancake flipping.</li>
<li><b>Fasta</b><br>Generate random text output.</li>
<li><b>Revcomp</b><br>Do some stuff with text input.</li>
<li><b>BinaryTrees</b><br>GC benchmark.</li>
<li><b>Knucleotide</b><br>Do some other stuff with text input.</li>
<li><b>Nbody</b><br>N-body physics simulation
</li>
<li><b>Spectralnorm</b><br>Can't remember, it's always so well-behaved.</li>
<li><b>Pidigits</b><br>Calculate digits of pi</li>
</ul>

<p>
Note that benchmark results are not comparable unless both results are
run with the same revision of the benchmark suite.  We will be making
revisions from time to time in order to fix bugs or expand the scope
of the benchmark suite.  For previous revisions and the change log see
the <a href="http://v8.googlecode.com/svn/data/benchmarks/current/revisions.html">revisions</a> page.
</p>

</td><td style="text-align: center">
<div class="run">
  <div id="status">Starting in WebWorker...</div>
  <div id="results">
  </div>
  <!--<div id="debug">Debug output:</div>-->
</div>
</td></tr></table>

</div>

</body>
</html>
